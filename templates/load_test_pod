apiVersion: v1
kind: Pod
metadata:
  name: load-test-pod-{{ .instanceName }}
  namespace: {{ .namespace }}
spec:
  containers:
    - name: load-test-pod
      image: nuc.lliu.ca/lliu/scale_maker:51
      command: ["/bin/bash"]
      args: ["-c", "stress-ng {{ .commandParams }}"]
      livenessProbe:
        exec:
          command:
          - /bin/true
      readinessProbe:
        exec:
          command:
          - /bin/true
      resources:
        requests:
          cpu: "{{ .cpuRequest }}"
          memory: "{{ .memoryRequest }}"
        limits:
          cpu: "{{ .cpuLimit }}"
          memory: "{{ .memoryLimit }}"
      securityContext: {}